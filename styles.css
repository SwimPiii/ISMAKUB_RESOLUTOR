* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color: #111;
  background: #f7f8fb;
}
/* Tamaños base (sobrescritos en móviles vía @media) */
:root {
  --gap: 8px;
  --cell: 40px;        /* ancho celda mesa */
  --cell-h: 36px;      /* alto celda mesa */
  --hand-cell: 46px;   /* alto celda mano */
}
.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 16px; background: #0d47a1; color: #fff; position: sticky; top: 0; z-index: 10;
}
.topbar h1 { margin: 0; font-size: 18px; font-weight: 600; }
.actions { display: flex; gap: 8px; }
button { cursor: pointer; border-radius: 8px; border: 1px solid #cfd8dc; padding: 8px 12px; background: #fff; }
button.primary { background: linear-gradient(135deg, #1976d2, #26a69a); color: #fff; border: none; }
/* Ghost por defecto (sobre fondos claros) */
button.ghost { background: transparent; color: #1565c0; border-color: #90caf9; }
/* Ghost en topbar oscuro */
.topbar button.ghost { color: #fff; border-color: #90caf9; }
button.icon { background: #eee; border: none; width: 28px; height: 28px; border-radius: 6px; }

.container { max-width: 1200px; margin: 20px auto; padding: 0 16px; display: grid; gap: 20px; }
.panel { background: #fff; border: 1px solid #e0e0e0; border-radius: 12px; padding: 16px; box-shadow: 0 2px 10px rgba(0,0,0,.03); }
.panel h2 { margin: 0 0 10px; font-size: 18px; }
.hint { color: #607d8b; font-size: 12px; margin-top: 8px; }

/* Grids */
.grid { display: grid; gap: var(--gap); }
.board { grid-template-columns: repeat(14, var(--cell)); grid-auto-rows: var(--cell-h); padding: 10px; background: radial-gradient(circle, rgba(0,0,0,0.15) 1px, transparent 1px); background-size: 16px 16px; border-radius: 10px; }
.hand { grid-template-columns: repeat(14, var(--cell)); grid-auto-rows: var(--hand-cell); padding: 10px; background: radial-gradient(circle, rgba(0,0,0,0.15) 1px, transparent 1px); background-size: 16px 16px; border-radius: 10px; }

.cell { display: flex; align-items: center; justify-content: center; border: 2px dotted #cfd8dc; border-radius: 10px; background: rgba(255,255,255,.7); position: relative; user-select: none; }
.cell:hover { outline: 2px solid #90caf9; }
.cell .tile { min-width: calc(var(--cell) - 8px); height: calc(var(--cell-h) - 6px); border-radius: 8px; display: inline-flex; align-items: center; justify-content: center; padding: 0 6px; font-weight: 700; border: 2px solid rgba(0,0,0,.15); box-shadow: 0 1px 0 rgba(0,0,0,.08); font-size: clamp(10px, 2.8vw, 16px); color: #000; }
/* Colores más fuertes manteniendo contraste con texto negro */
.tile.red { background: #ffb3b3; border-color: #ff8a80; }
.tile.blue { background: #bbdefb; border-color: #90caf9; }
.tile.black { background: #e0e0e0; border-color: #bdbdbd; }
.tile.orange { background: #ffcc80; border-color: #ffb74d; }
.tile.joker { background: #ede7f6; color: #6a1b9a; border-color: #d1c4e9; }

/* Picker */
.picker { position: fixed; inset: auto auto 20px 20px; width: min(850px, calc(100% - 40px)); background: #121826; color: #fff; border: 1px solid #2a3346; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,.35); z-index: 50; }
.picker-header { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-bottom: 1px solid #2a3346; }
.picker-body { max-height: 50vh; overflow: auto; padding: 10px 12px; display: grid; gap: 10px; }
.picker-row { display: grid; grid-template-columns: 90px repeat(13, 1fr); gap: 8px; align-items: center; }
.picker-row .label { color: #9fb3c8; font-size: 13px; text-align: right; padding-right: 6px; }
.picker button { border-radius: 8px; border: 1px solid #41516e; padding: 6px 8px; background: #1b2436; color: #e2e8f0; }
.picker button:hover { background: #26324a; }
.picker .tilebtn.red { color: #ff8a80; }
.picker .tilebtn.blue { color: #90caf9; }
.picker .tilebtn.black { color: #eceff1; }
.picker .tilebtn.orange { color: #ffcc80; }
.picker .tilebtn.joker { color: #e1bee7; }
.picker-footer { border-top: 1px solid #2a3346; padding: 10px 12px; display: flex; justify-content: space-between; }

.result { margin-top: 10px; background: #f1f8e9; color: #33691e; border: 1px solid #c5e1a5; padding: 10px; border-radius: 8px; min-height: 36px; }
.footer { text-align: center; color: #78909c; padding: 20px; }

/* Optimización móvil (iPhone ~390px de ancho) */
@media (max-width: 430px) {
  :root {
    --gap: 4px;
    /* 14 columnas con gaps y padding deben caber en ~390px */
    --cell: clamp(24px, 6.5vw, 30px);
    --cell-h: clamp(22px, 6vw, 28px);
    --hand-cell: clamp(26px, 7vw, 34px);
  }
  .container { gap: 14px; padding: 0 10px; }
  .panel { padding: 12px; }
  .board, .hand { padding: 6px; background-size: 14px 14px; }
  .cell { border-width: 1.5px; border-radius: 8px; }
  .cell .tile { border-width: 1.5px; border-radius: 6px; }
  .topbar { padding: 10px 12px; }
  .topbar h1 { font-size: 16px; }
  .actions button.ghost { font-size: 12px; padding: 6px 8px; }
  /* Picker como hoja inferior */
  .picker[data-mode="sheet"] { inset: auto 0 calc(env(safe-area-inset-bottom, 0) + 0px) 0; width: 100%; border-radius: 12px 12px 0 0; }
  .picker[data-mode="sheet"] .picker-body { max-height: 45vh; }
  .picker-row { grid-template-columns: 64px repeat(13, 1fr); gap: 6px; }
}
